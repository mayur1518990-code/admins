{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/majalgav/hosting%20admin/apps/admin-app/src/components/AdminSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface SidebarProps {\r\n  sidebarOpen?: boolean;\r\n  setSidebarOpen?: (open: boolean) => void;\r\n}\r\n\r\nexport function Sidebar({ sidebarOpen: externalSidebarOpen, setSidebarOpen: externalSetSidebarOpen }: SidebarProps = {}) {\r\n  const pathname = typeof window !== 'undefined' ? window.location.pathname : \"\";\r\n  const userRole: 'admin' | 'agent' | null = typeof document !== 'undefined'\r\n    ? (document.cookie.includes('admin-token') ? 'admin' : document.cookie.includes('agent-token') ? 'agent' : null)\r\n    : null;\r\n  \r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [internalSidebarOpen, setInternalSidebarOpen] = useState(false);\r\n  \r\n  // Use external state if provided, otherwise use internal state\r\n  const sidebarOpen = externalSidebarOpen !== undefined ? externalSidebarOpen : internalSidebarOpen;\r\n  const setSidebarOpen = externalSetSidebarOpen || setInternalSidebarOpen;\r\n\r\n  // Check if device is mobile\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      console.log('Mobile check:', mobile, 'Sidebar open:', sidebarOpen);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, [sidebarOpen]);\r\n\r\n  // Close sidebar when clicking outside on mobile\r\n  useEffect(() => {\r\n    if (sidebarOpen && isMobile) {\r\n      const handleClickOutside = (event: MouseEvent) => {\r\n        const sidebar = document.getElementById('sidebar');\r\n        const hamburger = document.getElementById('hamburger-menu');\r\n        if (sidebar && !sidebar.contains(event.target as Node) && \r\n            hamburger && !hamburger.contains(event.target as Node)) {\r\n          setSidebarOpen(false);\r\n        }\r\n      };\r\n      \r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n  }, [sidebarOpen, isMobile]);\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      if (userRole === 'admin') {\r\n        await fetch('/api/admin/logout', { method: 'POST' });\r\n      } else if (userRole === 'agent') {\r\n        await fetch('/api/agent/logout', { method: 'POST' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Logout API error:', error);\r\n    } finally {\r\n      document.cookie = 'admin-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';\r\n      document.cookie = 'agent-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';\r\n      window.location.href = '/';\r\n    }\r\n  };\r\n\r\n  const adminNavigation = [\r\n    { name: \"Dashboard\", href: \"/\", icon: \"üìä\" },\r\n    { name: \"User Management\", href: \"/admin/users\", icon: \"üë•\" },\r\n    { name: \"Agent Management\", href: \"/admin/agents\", icon: \"ü§ñ\" },\r\n    { name: \"File Management\", href: \"/admin/files\", icon: \"üìÅ\" },\r\n    { name: \"Assignment\", href: \"/admin/assign\", icon: \"üîó\" },\r\n    { name: \"Transactions\", href: \"/admin/transactions\", icon: \"üí≥\" },\r\n    { name: \"Audit Logs\", href: \"/admin/logs\", icon: \"üìã\" },\r\n    { name: \"System Settings\", href: \"/admin/settings\", icon: \"‚öôÔ∏è\" },\r\n  ];\r\n\r\n  const agentNavigation = [\r\n    { name: \"Dashboard\", href: \"/agent\", icon: \"üìä\" },\r\n    { name: \"My Files\", href: \"/agent/files\", icon: \"üìÅ\" },\r\n    { name: \"Reply\", href: \"/agent/reply\", icon: \"üí¨\" },\r\n  ];\r\n\r\n  const navigation = userRole === 'admin' ? adminNavigation : agentNavigation;\r\n  const portalTitle = userRole === 'admin' ? 'Admin Portal' : 'Agent Portal';\r\n  const portalSubtitle = userRole === 'admin' ? 'Document Management System' : 'File Processing System';\r\n\r\n  if (!userRole) {\r\n    return (\r\n      <div className=\"w-64 bg-white shadow-sm border-r h-screen flex items-center justify-center flex-shrink-0\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-gray-400 text-4xl mb-4\">üîí</div>\r\n          <p className=\"text-gray-600\">Please log in</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Always show sidebar on desktop, only hide on mobile when closed\r\n  const shouldShowSidebar = !isMobile || sidebarOpen;\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile Overlay */}\r\n      {isMobile && sidebarOpen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\r\n          onClick={() => setSidebarOpen(false)}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidebar */}\r\n      {shouldShowSidebar && (\r\n        <div \r\n          id=\"sidebar\"\r\n          className={`bg-white shadow-sm border-r h-screen flex-shrink-0 ${\r\n            isMobile \r\n              ? `fixed left-0 top-0 w-64 z-50 transition-transform duration-300 ease-in-out`\r\n              : 'w-64 relative'\r\n          }`}\r\n          style={{\r\n            transform: isMobile ? (sidebarOpen ? 'translateX(0)' : 'translateX(-100%)') : 'none'\r\n          }}\r\n        >\r\n      <div className=\"p-6\">\r\n        <h2 className=\"text-xl font-bold text-gray-900\">{portalTitle}</h2>\r\n        <p className=\"text-sm text-gray-500 mt-1\">{portalSubtitle}</p>\r\n        <div className=\"mt-2\">\r\n          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n            userRole === 'admin' \r\n              ? 'bg-red-100 text-red-800' \r\n              : 'bg-blue-100 text-blue-800'\r\n          }`}>\r\n            {userRole === 'admin' ? 'üëë Admin' : 'ü§ñ Agent'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <nav className=\"mt-6\">\r\n        <div className=\"px-6 py-2\">\r\n          <h3 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">\r\n            {userRole === 'admin' ? 'Management' : 'Work'}\r\n          </h3>\r\n        </div>\r\n        \r\n        <div className=\"mt-2\">\r\n          {navigation.map((item) => (\r\n            <a\r\n              key={item.name}\r\n              href={item.href}\r\n              onClick={() => {\r\n                if (isMobile) {\r\n                  setSidebarOpen(false);\r\n                }\r\n              }}\r\n              className={`flex items-center px-6 py-3 text-sm font-medium transition-colors ${\r\n                isActive(item.href) \r\n                  ? \"bg-blue-50 text-blue-700 border-r-2 border-blue-700\" \r\n                  : \"text-gray-700 hover:bg-gray-50\"\r\n              }`}\r\n            >\r\n              <span className=\"text-lg mr-3\">{item.icon}</span>\r\n              {item.name}\r\n            </a>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Logout Button */}\r\n        <div className=\"mt-8 px-6\">\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center px-4 py-2 text-sm font-medium text-red-700 bg-red-50 rounded-lg hover:bg-red-100 transition-colors\"\r\n          >\r\n            <span className=\"text-lg mr-3\">üö™</span>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </nav>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n// Export the sidebar state and toggle function for use in other components\r\nexport function useSidebar() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth < 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  return { sidebarOpen, setSidebarOpen, isMobile };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}