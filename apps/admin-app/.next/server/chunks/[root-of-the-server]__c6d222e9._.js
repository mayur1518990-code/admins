module.exports = [
"[project]/apps/admin-app/.next-internal/server/app/api/admin/users/route/actions.js [app-rsc] (server actions loader, ecmascript)", ((__turbopack_context__, module, exports) => {

}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/firebase-admin/app [external] (firebase-admin/app, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("firebase-admin/app");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/firebase-admin/auth [external] (firebase-admin/auth, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("firebase-admin/auth");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/firebase-admin/firestore [external] (firebase-admin/firestore, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("firebase-admin/firestore");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/firebase-admin/storage [external] (firebase-admin/storage, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("firebase-admin/storage");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[project]/apps/admin-app/src/lib/firebase-admin.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "adminAuth",
    ()=>adminAuth,
    "adminDb",
    ()=>adminDb,
    "adminStorage",
    ()=>adminStorage,
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/firebase-admin/app [external] (firebase-admin/app, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$auth__$5b$external$5d$__$28$firebase$2d$admin$2f$auth$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/firebase-admin/auth [external] (firebase-admin/auth, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$firestore__$5b$external$5d$__$28$firebase$2d$admin$2f$firestore$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/firebase-admin/firestore [external] (firebase-admin/firestore, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$storage__$5b$external$5d$__$28$firebase$2d$admin$2f$storage$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/firebase-admin/storage [external] (firebase-admin/storage, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$auth__$5b$external$5d$__$28$firebase$2d$admin$2f$auth$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$firestore__$5b$external$5d$__$28$firebase$2d$admin$2f$firestore$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$storage__$5b$external$5d$__$28$firebase$2d$admin$2f$storage$2c$__esm_import$29$__
]);
[__TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$auth__$5b$external$5d$__$28$firebase$2d$admin$2f$auth$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$firestore__$5b$external$5d$__$28$firebase$2d$admin$2f$firestore$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$storage__$5b$external$5d$__$28$firebase$2d$admin$2f$storage$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
// Initialize Firebase Admin
// Handle both true multiline and "\n"-escaped private keys
const privateKey = (process.env.FIREBASE_PRIVATE_KEY || '').replace(/^"|"$/g, '').replace(/\\n/g, '\n');
const firebaseAdminConfig = {
    credential: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__["cert"])({
        projectId: process.env.FIREBASE_PROJECT_ID,
        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,
        privateKey: privateKey
    })
};
// Initialize Firebase Admin
const adminApp = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__["getApps"])().length === 0 ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__["initializeApp"])(firebaseAdminConfig) : (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$app__$5b$external$5d$__$28$firebase$2d$admin$2f$app$2c$__esm_import$29$__["getApps"])()[0];
const adminAuth = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$auth__$5b$external$5d$__$28$firebase$2d$admin$2f$auth$2c$__esm_import$29$__["getAuth"])(adminApp);
const adminDb = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$firestore__$5b$external$5d$__$28$firebase$2d$admin$2f$firestore$2c$__esm_import$29$__["getFirestore"])(adminApp);
const adminStorage = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2d$admin$2f$storage__$5b$external$5d$__$28$firebase$2d$admin$2f$storage$2c$__esm_import$29$__["getStorage"])(adminApp);
const __TURBOPACK__default__export__ = adminApp;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/apps/admin-app/src/lib/server-cache.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "makeKey",
    ()=>makeKey,
    "serverCache",
    ()=>serverCache
]);
class SimpleLRUCache {
    maxEntries;
    store;
    order;
    constructor(maxEntries = 200){
        this.maxEntries = maxEntries;
        this.store = new Map();
        this.order = [];
    }
    get(key) {
        const entry = this.store.get(key);
        if (!entry) return undefined;
        if (Date.now() > entry.expiresAt) {
            this.delete(key);
            return undefined;
        }
        // touch
        this.order = this.order.filter((k)=>k !== key);
        this.order.push(key);
        return entry.data;
    }
    set(key, value, ttlMs) {
        const expiresAt = Date.now() + ttlMs;
        this.store.set(key, {
            data: value,
            expiresAt
        });
        this.order = this.order.filter((k)=>k !== key);
        this.order.push(key);
        // evict
        while(this.order.length > this.maxEntries){
            const oldest = this.order.shift();
            if (oldest) this.store.delete(oldest);
        }
    }
    delete(key) {
        this.store.delete(key);
        this.order = this.order.filter((k)=>k !== key);
    }
    deleteByPrefix(prefix) {
        for (const key of Array.from(this.store.keys())){
            if (key.startsWith(prefix)) this.delete(key);
        }
    }
}
const serverCache = new SimpleLRUCache(300);
function makeKey(resource, parts = []) {
    return `admin:${resource}:${parts.filter((v)=>v !== undefined && v !== null).join(':')}`;
}
}),
"[project]/apps/admin-app/src/lib/admin-auth.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "getQueryParams",
    ()=>getQueryParams,
    "verifyAdminAuth",
    ()=>verifyAdminAuth
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/headers.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/admin-app/src/lib/firebase-admin.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
async function verifyAdminAuth() {
    try {
        const cookieStore = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cookies"])();
        const token = cookieStore.get('admin-token')?.value;
        // For development, we'll allow access with a simple token check
        if (token === 'dev_admin_token') {
            return {
                adminId: "dev_admin",
                name: "Development Admin",
                email: "admin@docuploaer.com",
                role: "admin"
            };
        }
        if (!token) {
            throw new Error('No admin authentication token found');
        }
        // Verify the token with Firebase Admin
        const decodedToken = await __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminAuth"].verifyIdToken(token);
        // Check if this is a custom token with admin role
        if (decodedToken.role === 'admin') {
            return {
                adminId: decodedToken.adminId || decodedToken.uid,
                name: decodedToken.name || 'Admin',
                email: decodedToken.email || 'admin@example.com',
                role: "admin"
            };
        }
        // Get admin data from admins collection
        const adminDoc = await __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection('admins').doc(decodedToken.uid).get();
        if (!adminDoc.exists) {
            throw new Error('Admin not found in database');
        }
        const adminData = adminDoc.data();
        if (!adminData?.isActive) {
            throw new Error('Admin account is deactivated');
        }
        return {
            adminId: decodedToken.uid,
            name: adminData.name,
            email: adminData.email,
            role: "admin"
        };
    } catch (error) {
        // For development, return default admin even on error
        return {
            adminId: "dev_admin",
            name: "Development Admin",
            email: "admin@docuploaer.com",
            role: "admin"
        };
    }
}
function getQueryParams(request) {
    const { searchParams } = new URL(request.url);
    return {
        filter: searchParams.get('filter') || 'all',
        dateFilter: searchParams.get('dateFilter') || 'all',
        search: searchParams.get('search') || '',
        limit: parseInt(searchParams.get('limit') || '50'),
        offset: parseInt(searchParams.get('offset') || '0'),
        status: searchParams.get('status'),
        userId: searchParams.get('userId'),
        fileId: searchParams.get('fileId'),
        startDate: searchParams.get('startDate'),
        endDate: searchParams.get('endDate')
    };
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/apps/admin-app/src/app/api/admin/users/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "DELETE",
    ()=>DELETE,
    "GET",
    ()=>GET,
    "POST",
    ()=>POST,
    "PUT",
    ()=>PUT
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/admin-app/src/lib/firebase-admin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/admin-app/src/lib/server-cache.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/admin-app/src/lib/admin-auth.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
// Helper function to handle Firestore connection issues with retry logic
async function withRetry(operation, maxRetries = 3, delay = 1000) {
    let lastError;
    for(let attempt = 1; attempt <= maxRetries; attempt++){
        try {
            return await operation();
        } catch (error) {
            lastError = error;
            // Check if it's a connection error that we should retry
            if (error.code === 14 || // UNAVAILABLE
            error.message?.includes('No connection established') || error.message?.includes('network socket disconnected') || error.message?.includes('TLS connection') || error.code === 'ECONNRESET' || error.code === 'ENOTFOUND') {
                // Retrying...
                if (attempt < maxRetries) {
                    await new Promise((resolve)=>setTimeout(resolve, delay));
                    delay *= 2; // Exponential backoff
                    continue;
                }
            }
            // If it's not a retryable error or we've exhausted retries, throw
            throw error;
        }
    }
    throw lastError;
}
async function GET(request) {
    try {
        // Verify admin authentication
        const admin = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyAdminAuth"])();
        if (!admin) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { searchParams } = new URL(request.url);
        const role = searchParams.get('role'); // 'user' or 'agent'
        const status = searchParams.get('status'); // 'active' or 'inactive'
        const limit = Math.min(parseInt(searchParams.get('limit') || '100'), 100); // Cap at 100
        const offset = parseInt(searchParams.get('offset') || '0');
        const search = searchParams.get('search') || '';
        const cacheKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'list',
            role || 'all',
            status || 'all',
            limit,
            offset,
            search
        ]);
        const cached = __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].get(cacheKey);
        if (cached) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(cached);
        }
        // Define collections to query based on role filter
        const collectionsToQuery = [];
        if (!role || role === 'all') {
            collectionsToQuery.push('users', 'agents', 'admins');
        } else {
            if (role === 'user') collectionsToQuery.push('users');
            if (role === 'agent') collectionsToQuery.push('agents');
            if (role === 'admin') collectionsToQuery.push('admins');
        }
        // ULTRA-OPTIMIZED: Fetch only what we need + small buffer
        const strictLimit = Math.min(limit + 20, 100); // Small buffer for filtering, max 100
        // OPTIMIZED: Query collections with proper ordering and limits
        const queryPromises = collectionsToQuery.map(async (collectionName)=>{
            try {
                let query = __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName);
                // Apply status filter at database level
                if (status && status !== 'all') {
                    const isActive = status === 'active';
                    query = query.where('isActive', '==', isActive);
                }
                // Add ordering for consistent results
                query = query.orderBy('createdAt', 'desc');
                // Apply strict limit to minimize data transfer
                query = query.limit(strictLimit);
                const snapshot = await withRetry(()=>query.get());
                return {
                    collectionName,
                    snapshot
                };
            } catch (error) {
                console.error(`[ERROR] Users GET: ${collectionName} failed:`, error);
                return {
                    collectionName,
                    snapshot: {
                        docs: [],
                        size: 0
                    }
                };
            }
        });
        const results = await Promise.all(queryPromises);
        // Map users efficiently (minimal transformations)
        let allUsers = [];
        results.forEach(({ collectionName, snapshot })=>{
            // Skip empty snapshots
            if (!snapshot.docs || snapshot.size === 0) return;
            const collectionUsers = snapshot.docs.map((doc)=>{
                const data = doc.data();
                return {
                    id: doc.id,
                    email: data.email,
                    name: data.name,
                    role: data.role || collectionName.slice(0, -1),
                    isActive: data.isActive,
                    createdAt: data.createdAt?.toDate?.() || data.createdAt,
                    lastLoginAt: data.lastLoginAt?.toDate?.() || data.lastLoginAt,
                    phone: data.phone || null
                };
            });
            allUsers = allUsers.concat(collectionUsers); // Faster than spread
        });
        // Sort by timestamp in memory (fast for <100 items)
        allUsers.sort((a, b)=>{
            const aTime = new Date(a.createdAt).getTime() || 0;
            const bTime = new Date(b.createdAt).getTime() || 0;
            return bTime - aTime;
        });
        // Apply search filter (if needed)
        if (search) {
            const searchLower = search.toLowerCase();
            allUsers = allUsers.filter((user)=>user.name?.toLowerCase().includes(searchLower) || user.email?.toLowerCase().includes(searchLower) || user.phone?.toLowerCase().includes(searchLower));
        }
        // Get total count efficiently
        let totalCount = 0;
        if (search) {
            totalCount = allUsers.length; // Filtered count
        } else {
            // Use cached count or estimate from fetched data
            const countCacheKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
                'count',
                role || 'all',
                status || 'all'
            ]);
            const cachedCount = __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].get(countCacheKey);
            if (cachedCount !== undefined) {
                totalCount = cachedCount;
            } else {
                totalCount = allUsers.length;
                __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].set(countCacheKey, totalCount, 300_000); // 5 min
            }
        }
        // Apply pagination
        const startIndex = offset;
        const endIndex = offset + limit;
        const users = allUsers.slice(startIndex, endIndex);
        const payload = {
            success: true,
            users,
            pagination: {
                total: totalCount,
                limit,
                offset,
                hasMore: endIndex < totalCount,
                pages: Math.ceil(totalCount / limit)
            }
        };
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].set(cacheKey, payload, 300_000); // 5 min cache
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(payload);
    } catch (error) {
        console.error("Error fetching users:", error);
        // Handle specific error types
        if (error.code === 14 || error.message?.includes('No connection established')) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Database connection failed. Please try again."
            }, {
                status: 503
            });
        }
        if (error.name === 'AbortError' || error.message?.includes('timeout')) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Request timed out. Please try again."
            }, {
                status: 408
            });
        }
        if (error.message?.includes("adminAuthentication")) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Authentication required",
                message: error.message
            }, {
                status: 401
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: "Failed to fetch users",
            message: error?.message || 'Unknown error',
            details: ("TURBOPACK compile-time truthy", 1) ? error?.stack : "TURBOPACK unreachable"
        }, {
            status: 500
        });
    }
}
async function POST(request) {
    try {
        // Verify admin authentication
        const authStart = Date.now();
        const admin = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyAdminAuth"])();
        if (!admin) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const body = await request.json();
        const { email, name, password, role = 'user', phone } = body;
        // Trim and validate inputs
        const trimmedEmail = email?.trim();
        const trimmedName = name?.trim();
        if (!trimmedEmail || !trimmedName || !password) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Email, name, and password are required",
                message: "Email, name, and password are required"
            }, {
                status: 400
            });
        }
        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(trimmedEmail)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Please enter a valid email address",
                message: "Please enter a valid email address"
            }, {
                status: 400
            });
        }
        // Validate password length
        if (password.length < 6) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Password must be at least 6 characters long",
                message: "Password must be at least 6 characters long"
            }, {
                status: 400
            });
        }
        if (![
            'user',
            'agent',
            'admin'
        ].includes(role)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Invalid role. Must be user, agent, or admin",
                message: `Invalid role: ${role}. Must be user, agent, or admin`
            }, {
                status: 400
            });
        }
        // Check if user already exists
        const existingUser = await withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminAuth"].getUserByEmail(trimmedEmail)).catch(()=>null);
        if (existingUser) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User with this email already exists"
            }, {
                status: 409
            });
        }
        // Create user in Firebase Auth
        const userRecord = await withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminAuth"].createUser({
                email: trimmedEmail,
                password,
                displayName: trimmedName
            }));
        // Prepare user document
        const userData = {
            email: trimmedEmail,
            name: trimmedName,
            password,
            role,
            phone: phone?.trim() || null,
            isActive: true,
            createdAt: new Date(),
            createdBy: admin.adminId
        };
        // Determine collection based on role
        let collectionName = 'users'; // default
        if (role === 'agent') collectionName = 'agents';
        if (role === 'admin') collectionName = 'admins';
        // OPTIMIZED: Run Firestore writes in parallel
        await Promise.all([
            __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName).doc(userRecord.uid).set(userData),
            __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection('logs').add({
                actionType: 'user_created',
                actorId: admin.adminId,
                actorType: 'admin',
                targetUserId: userRecord.uid,
                details: {
                    email: trimmedEmail,
                    name: trimmedName,
                    role
                },
                timestamp: new Date()
            })
        ]);
        // Invalidate cache after successful creation
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'list'
        ]));
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'count'
        ]));
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: "User created successfully",
            data: {
                user: {
                    id: userRecord.uid,
                    email: trimmedEmail,
                    name: trimmedName,
                    role,
                    isActive: true,
                    createdAt: userData.createdAt
                }
            }
        });
    } catch (error) {
        console.error("Error creating user:", error);
        if (error.message?.includes("adminAuthentication")) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Authentication required",
                message: error.message
            }, {
                status: 401
            });
        }
        if (error.code === 'auth/email-already-exists' || error.code === 'adminAuth/email-already-exists') {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User with this email already exists",
                message: "User with this email already exists"
            }, {
                status: 409
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: "Failed to create user",
            message: error?.message || "Failed to create user"
        }, {
            status: 500
        });
    }
}
async function PUT(request) {
    try {
        // Verify admin authentication
        const authStart = Date.now();
        const admin = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyAdminAuth"])();
        if (!admin) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { userId, name, email, role, isActive, phone } = await request.json();
        if (!userId) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User ID is required"
            }, {
                status: 400
            });
        }
        // OPTIMIZED: Find user in all collections PARALLEL
        const collections = [
            'users',
            'agents',
            'admins'
        ];
        const findPromises = collections.map((collection)=>withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collection).doc(userId).get()));
        const docs = await Promise.all(findPromises);
        let userDoc = null;
        let collectionName = '';
        for(let i = 0; i < docs.length; i++){
            if (docs[i].exists) {
                userDoc = docs[i];
                collectionName = collections[i];
                break;
            }
        }
        if (!userDoc) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User not found"
            }, {
                status: 404
            });
        }
        const updateData = {
            updatedAt: new Date(),
            updatedBy: admin.adminId
        };
        if (name !== undefined) updateData.name = name;
        if (email !== undefined) updateData.email = email;
        if (role !== undefined) updateData.role = role;
        if (isActive !== undefined) updateData.isActive = isActive;
        if (phone !== undefined) updateData.phone = phone;
        // OPTIMIZED: Parallel updates for Firestore + Auth + Logs
        const updatePromises = [];
        // If role is being changed, we might need to move the user to a different collection
        if (role !== undefined && role !== userDoc.data().role) {
            const newCollectionName = role === 'agent' ? 'agents' : role === 'admin' ? 'admins' : 'users';
            if (newCollectionName !== collectionName) {
                // Move user to new collection (sequential - must create before delete)
                await __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(newCollectionName).doc(userId).set({
                    ...userDoc.data(),
                    ...updateData
                });
                await __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName).doc(userId).delete();
            } else {
                // Update in same collection
                updatePromises.push(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName).doc(userId).update(updateData));
            }
        } else {
            // Update user document in current collection
            updatePromises.push(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName).doc(userId).update(updateData));
        }
        // Update Firebase Auth if email changed (parallel)
        if (email !== undefined) {
            updatePromises.push(withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminAuth"].updateUser(userId, {
                    email
                })));
        }
        // Log the action (parallel)
        updatePromises.push(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection('logs').add({
            actionType: 'user_updated',
            actorId: admin.adminId,
            actorType: 'admin',
            targetUserId: userId,
            details: updateData,
            timestamp: new Date()
        }));
        // Execute all updates in parallel
        await Promise.all(updatePromises);
        // Invalidate cache
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'list'
        ]));
        if (role !== undefined) {
            __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
                'count'
            ]));
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: "User updated successfully"
        });
    } catch (error) {
        console.error("Error updating user:", error);
        if (error.message.includes("adminAuthentication")) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Authentication required"
            }, {
                status: 401
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: "Failed to update user"
        }, {
            status: 500
        });
    }
}
async function DELETE(request) {
    try {
        // Verify admin authentication
        const authStart = Date.now();
        const admin = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$admin$2d$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyAdminAuth"])();
        if (!admin) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { searchParams } = new URL(request.url);
        const userId = searchParams.get('userId');
        if (!userId) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User ID is required"
            }, {
                status: 400
            });
        }
        // OPTIMIZED: Find user in all collections PARALLEL
        const collections = [
            'users',
            'agents',
            'admins'
        ];
        const findPromises = collections.map((collection)=>withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collection).doc(userId).get()));
        const docs = await Promise.all(findPromises);
        let userDoc = null;
        let collectionName = '';
        for(let i = 0; i < docs.length; i++){
            if (docs[i].exists) {
                userDoc = docs[i];
                collectionName = collections[i];
                break;
            }
        }
        if (!userDoc) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "User not found"
            }, {
                status: 404
            });
        }
        // OPTIMIZED: Run deletion operations in parallel
        await Promise.all([
            // Delete from Firestore
            withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection(collectionName).doc(userId).delete()),
            // Delete from Firebase Auth
            withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminAuth"].deleteUser(userId)),
            // Log the action
            withRetry(()=>__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$firebase$2d$admin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminDb"].collection('logs').add({
                    actionType: 'user_deleted',
                    actorId: admin.adminId,
                    actorType: 'admin',
                    targetUserId: userId,
                    details: {
                        reason: 'Admin deletion'
                    },
                    timestamp: new Date()
                }))
        ]);
        // Invalidate cache after successful deletion
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'list'
        ]));
        __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["serverCache"].deleteByPrefix((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$admin$2d$app$2f$src$2f$lib$2f$server$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["makeKey"])('users', [
            'count'
        ]));
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: "User deleted successfully"
        });
    } catch (error) {
        console.error("Error deleting user:", error);
        if (error.message.includes("adminAuthentication")) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: "Authentication required"
            }, {
                status: 401
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: "Failed to delete user"
        }, {
            status: 500
        });
    }
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__c6d222e9._.js.map